<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>Smart Hajj - ŸÑÿπÿ®ÿ© ÿßŸÑŸÅÿ±ÿ≤ üïã</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800;900&family=Cairo:wght@700;800;900&display=swap" rel="stylesheet">
</head>
<body>
<div id="app"></div>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
}

html, body {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    position: fixed;
}

body {
    font-family: 'Cairo', 'Poppins', sans-serif;
    background: linear-gradient(135deg, #FEF7E5 0%, #FFF8DC 50%, #FFEFD5 100%);
    background-attachment: fixed;
}

.particle {
    position: fixed;
    width: 8px;
    height: 8px;
    background: radial-gradient(circle, #FFD700, #FFA500);
    border-radius: 50%;
    opacity: 0.5;
    pointer-events: none;
    z-index: 1;
    animation: rise 6s ease-in infinite;
}

@keyframes rise {
    0% { transform: translateY(100vh) scale(0); opacity: 0; }
    50% { opacity: 0.6; }
    100% { transform: translateY(-100px) scale(1.2); opacity: 0; }
}

.game-wrapper {
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 2;
}

.top-bar {
    background: linear-gradient(135deg, #1a1f2e 0%, #2d3748 100%);
    padding: 0 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
    position: relative;
    border-bottom: 2px solid #FFD700;
    height: 55px;
    flex-shrink: 0;
}

.top-bar::before {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, #FFD700 0%, #FFA500 50%, #FFD700 100%);
    background-size: 200% 100%;
    animation: shimmerBorder 3s linear infinite;
}

@keyframes shimmerBorder {
    0% { background-position: 0% center; }
    100% { background-position: 200% center; }
}

.brand-logo {
    display: flex;
    align-items: center;
    gap: 10px;
}

.brand-icon {
    font-size: 24px;
    filter: drop-shadow(0 3px 6px rgba(255, 215, 0, 0.4));
}

.brand-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.brand-text {
    font-size: 18px;
    font-weight: 900;
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 0.5px;
    line-height: 1;
}

.brand-tagline {
    font-size: 9px;
    color: #CBD5E0;
    font-weight: 600;
    letter-spacing: 0.8px;
    text-transform: uppercase;
    line-height: 1;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.lang-toggle {
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    border: none;
    color: white;
    padding: 8px 14px;
    border-radius: 50px;
    cursor: pointer;
    font-size: 11px;
    font-weight: 900;
    transition: all 0.3s ease;
    box-shadow: 0 3px 12px rgba(255, 215, 0, 0.3);
    display: flex;
    align-items: center;
    gap: 5px;
}

.lang-toggle:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 18px rgba(255, 215, 0, 0.5);
}

.header-shield {
    width: 32px;
    height: 32px;
    background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    box-shadow: 0 3px 12px rgba(76, 175, 80, 0.3);
}

.main-content {
    height: calc(100vh - 55px);
    display: flex;
    flex-direction: column;
    padding: 12px 15px;
    overflow: hidden;
}

.start-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    animation: fadeInUp 0.6s ease;
}

@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.welcome-hero {
    font-size: 70px;
    margin-bottom: 12px;
    animation: float 4s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}

.game-title {
    font-size: 32px;
    background: linear-gradient(135deg, #FF6B9D 0%, #FFA500 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 900;
    margin-bottom: 10px;
    text-align: center;
}

.game-description {
    font-size: 16px;
    color: #FF6B00;
    font-weight: 800;
    margin-bottom: 20px;
    text-align: center;
    line-height: 1.4;
    max-width: 80vw;
}

.start-btn {
    background: linear-gradient(135deg, #FF6B9D 0%, #FFA500 100%);
    color: white;
    border: none;
    padding: 16px 40px;
    border-radius: 50px;
    font-size: 20px;
    font-weight: 900;
    cursor: pointer;
    box-shadow: 0 8px 30px rgba(255, 107, 157, 0.6);
    transition: all 0.3s ease;
    font-family: inherit;
}

.start-btn:hover {
    transform: scale(1.08) translateY(-4px);
    box-shadow: 0 12px 40px rgba(255, 107, 157, 0.8);
}

.game-screen {
    display: flex;
    flex-direction: column;
    height: 100%;
    animation: fadeIn 0.6s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.game-status {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 10px;
    gap: 15px;
    padding: 8px 15px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 15px;
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
    flex-shrink: 0;
}

.timer-box, .score-box, .progress-box {
    background: linear-gradient(135deg, #fff 0%, #FFF9F0 100%);
    padding: 8px 14px;
    border-radius: 50px;
    border: 2px solid #FFD700;
    font-size: 13px;
    font-weight: 900;
    color: #2d3748;
    box-shadow: 0 3px 10px rgba(255, 215, 0, 0.2);
    display: flex;
    align-items: center;
    gap: 6px;
}

.timer-box.urgent {
    border-color: #F44336;
    animation: urgentPulse 0.6s ease-in-out infinite;
}

@keyframes urgentPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.timer-number {
    font-size: 18px;
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.instruction {
    background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
    padding: 10px 15px;
    border-radius: 12px;
    border: 2px solid #e9ecef;
    margin-bottom: 10px;
    text-align: center;
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.06);
    border-left: 3px solid #FFD700;
    flex-shrink: 0;
}

.instruction-text {
    font-size: 14px;
    color: #2d3748;
    font-weight: 800;
    line-height: 1.3;
}

.game-layout {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 12px;
    flex: 1;
    min-height: 0;
}

.drop-zone {
    border-radius: 15px;
    border: 3px dashed;
    padding: 10px 8px;
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
    overflow-y: auto;
}

.drop-zone-safe {
    background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
    border-color: #4CAF50;
}

.drop-zone-safe.drag-over {
    background: linear-gradient(135deg, #C8E6C9 0%, #A5D6A7 100%);
    border-color: #2E7D32;
    box-shadow: 0 0 30px rgba(76, 175, 80, 0.6);
    transform: scale(1.02);
}

.drop-zone-fake {
    background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%);
    border-color: #F44336;
}

.drop-zone-fake.drag-over {
    background: linear-gradient(135deg, #FFCDD2 0%, #EF9A9A 100%);
    border-color: #C62828;
    box-shadow: 0 0 30px rgba(244, 67, 54, 0.6);
    transform: scale(1.02);
}

.waiting-cards {
    background: linear-gradient(135deg, #FFF9F0 0%, #FFE5B4 100%);
    border: 3px solid #FFD700;
    border-radius: 15px;
    padding: 8px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
    overflow-y: auto;
}

.waiting-cards-header {
    grid-column: 1 / -1;
    text-align: center;
    font-size: 14px;
    font-weight: 900;
    color: #FF6B00;
    padding: 6px;
    background: white;
    border-radius: 10px;
    margin-bottom: 4px;
}

.zone-header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: inherit;
    padding-bottom: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-shrink: 0;
}

.zone-label {
    font-size: 16px;
    font-weight: 900;
    color: white;
    padding: 8px 14px;
    border-radius: 50px;
    margin-bottom: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.drop-zone-safe .zone-label {
    background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
}

.drop-zone-fake .zone-label {
    background: linear-gradient(135deg, #F44336 0%, #EF5350 100%);
}

.zone-icon {
    font-size: 28px;
}

.cards-area {
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 100%;
    align-items: center;
}

.campaign-card {
    background: linear-gradient(135deg, #FFFFFF 0%, #FFF9F0 100%);
    border: 2px solid #FFD700;
    border-radius: 12px;
    padding: 10px 8px;
    width: 95%;
    cursor: grab;
    transition: all 0.3s ease;
    box-shadow: 0 3px 12px rgba(255, 215, 0, 0.3);
    animation: cardAppear 0.5s ease backwards;
}

.campaign-card:nth-child(1) { animation-delay: 0.1s; }
.campaign-card:nth-child(2) { animation-delay: 0.15s; }
.campaign-card:nth-child(3) { animation-delay: 0.2s; }
.campaign-card:nth-child(4) { animation-delay: 0.25s; }
.campaign-card:nth-child(5) { animation-delay: 0.3s; }
.campaign-card:nth-child(6) { animation-delay: 0.35s; }
.campaign-card:nth-child(7) { animation-delay: 0.4s; }
.campaign-card:nth-child(8) { animation-delay: 0.45s; }

@keyframes cardAppear {
    from { opacity: 0; transform: translateY(15px) scale(0.9); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

.campaign-card:active {
    cursor: grabbing;
}

.campaign-card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 6px 20px rgba(255, 165, 0, 0.5);
    border-color: #FFA500;
}

.campaign-card.dragging {
    opacity: 0.5;
    cursor: grabbing;
    transform: rotate(4deg) scale(1.08);
}

.card-content {
    display: flex;
    align-items: center;
    gap: 8px;
}

[dir="rtl"] .card-content {
    flex-direction: row-reverse;
}

.card-icon {
    font-size: 20px;
    min-width: 20px;
    text-align: center;
    flex-shrink: 0;
}

.card-text {
    font-size: 11px;
    color: #FF6B00;
    font-weight: 800;
    line-height: 1.25;
    text-align: start;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.card-placed {
    opacity: 0.4;
    cursor: not-allowed;
    pointer-events: none;
    filter: grayscale(0.5);
}

.finish-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    animation: fadeInUp 0.8s ease;
    padding: 15px;
}

.result-hero {
    width: 120px;
    height: 120px;
    margin-bottom: 12px;
    border-radius: 50%;
    background: linear-gradient(135deg, #FF6B9D 0%, #FFA500 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 30px rgba(255, 107, 157, 0.5);
    position: relative;
    animation: resultAppear 1s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.result-hero.perfect {
    background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
    animation: resultAppear 1s cubic-bezier(0.34, 1.56, 0.64, 1), perfectGlow 2s ease-in-out infinite;
}

@keyframes perfectGlow {
    0%, 100% { box-shadow: 0 8px 30px rgba(76, 175, 80, 0.5); }
    50% { box-shadow: 0 12px 50px rgba(76, 175, 80, 0.8); }
}

.result-hero.excellent {
    background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
}

.result-hero.good {
    background: linear-gradient(135deg, #FFB300 0%, #FFC107 100%);
}

@keyframes resultAppear {
    from { transform: scale(0) rotate(-180deg); opacity: 0; }
    to { transform: scale(1) rotate(0deg); opacity: 1; }
}

.result-hero::before {
    content: '';
    position: absolute;
    inset: 8px;
    background: white;
    border-radius: 50%;
}

.result-score {
    font-size: 50px;
    background: linear-gradient(135deg, #FF6B9D 0%, #FFA500 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 900;
    position: relative;
    z-index: 1;
}

.result-hero.perfect .result-score {
    background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.performance-badge {
    display: inline-block;
    padding: 8px 20px;
    border-radius: 50px;
    font-size: 15px;
    font-weight: 900;
    margin-bottom: 12px;
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
}

.performance-badge.perfect {
    background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
    color: white;
}

.performance-badge.excellent {
    background: linear-gradient(135deg, #2196F3 0%, #42A5F5 100%);
    color: white;
}

.performance-badge.good {
    background: linear-gradient(135deg, #FFB300 0%, #FFC107 100%);
    color: white;
}

.performance-badge.needs-practice {
    background: linear-gradient(135deg, #FF6B9D 0%, #FFA500 100%);
    color: white;
}

.result-subtitle {
    font-size: 14px;
    color: #2d3748;
    margin-bottom: 15px;
    font-weight: 800;
    text-align: center;
    line-height: 1.4;
    max-width: 70vw;
}

.prize-card {
    background: linear-gradient(135deg, #FFF9F0 0%, #FFE5B4 100%);
    padding: 15px 20px;
    border-radius: 18px;
    border: 2px solid #FFD700;
    margin-bottom: 15px;
    box-shadow: 0 6px 25px rgba(255, 215, 0, 0.3);
    text-align: center;
    max-width: 70vw;
}

.prize-icon {
    font-size: 35px;
    margin-bottom: 8px;
}

.prize-text {
    font-size: 13px;
    font-weight: 900;
    color: #FF6B00;
    line-height: 1.4;
}

.action-buttons {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    justify-content: center;
}

.action-btn {
    background: linear-gradient(135deg, #FF6B9D 0%, #FFA500 100%);
    color: white;
    border: none;
    padding: 14px 24px;
    border-radius: 50px;
    font-size: 16px;
    font-weight: 900;
    cursor: pointer;
    box-shadow: 0 6px 25px rgba(255, 107, 157, 0.5);
    transition: all 0.3s ease;
    font-family: inherit;
}

.action-btn:hover {
    transform: scale(1.08) translateY(-4px);
    box-shadow: 0 10px 35px rgba(255, 107, 157, 0.7);
}

.action-btn-secondary {
    background: white;
    color: #FF6B9D;
    border: 2px solid #FFD700;
}

.back-to-menu {
    background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
    border: 2px solid #FFD700;
    color: #FF6B00;
    padding: 10px 18px;
    border-radius: 50px;
    font-size: 13px;
    font-weight: 900;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 12px rgba(255, 215, 0, 0.3);
    position: fixed;
    bottom: 15px;
    left: 15px;
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: inherit;
    text-decoration: none;
}

.back-to-menu:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
    border-color: #FFA500;
}

[dir="rtl"] .back-to-menu {
    left: auto;
    right: 15px;
}

.firework {
    position: fixed;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
}

@keyframes firework {
    0% { transform: translate(0, 0); opacity: 1; }
    100% { transform: translate(var(--x), var(--y)); opacity: 0; }
}

.drop-zone::-webkit-scrollbar,
.waiting-cards::-webkit-scrollbar {
    width: 4px;
}

.drop-zone::-webkit-scrollbar-track,
.waiting-cards::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 8px;
}

.drop-zone::-webkit-scrollbar-thumb,
.waiting-cards::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #FFD700 0%, #FFA500 100%);
    border-radius: 8px;
}
</style>

<script type="text/babel">
const { useState, useEffect } = React;

const ALL_CAMPAIGNS = [
  { id: 1, ar: "ÿ≠ŸÖŸÑÿ© ŸÖÿ±ÿÆÿµÿ© + ÿπŸÇÿØ ÿ±ÿ≥ŸÖŸä", en: "Licensed + Contract", icon: "‚úÖ", isSafe: true },
  { id: 2, ar: "ÿØŸÅÿπ ŸÜŸÇÿØŸä ÿ®ÿØŸàŸÜ ÿ•ŸäÿµÿßŸÑ", en: "Cash without receipt", icon: "üí∞", isSafe: false },
  { id: 3, ar: "ÿ≠ÿ≥ÿßÿ® ÿ¥ÿÆÿµŸä + ÿ£ÿ≥ÿπÿßÿ± ŸÖŸÜÿÆŸÅÿ∂ÿ©", en: "Personal account + Low prices", icon: "‚ö†Ô∏è", isSafe: false },
  { id: 4, ar: "ŸÖŸàŸÇÿπ ÿ±ÿ≥ŸÖŸä + ÿ±ŸÇŸÖ ÿ±ÿÆÿµÿ©", en: "Official website + License", icon: "üåê", isSafe: true },
  { id: 5, ar: "ÿ•ÿπŸÑÿßŸÜ ŸÅŸÇÿ∑ + ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖŸÉÿ™ÿ®", en: "Ad only + No office", icon: "üì±", isSafe: false },
  { id: 6, ar: "ŸÖŸÉÿ™ÿ® ÿ±ÿ≥ŸÖŸä + ÿ™ÿ£ŸÖŸäŸÜ", en: "Official office + Insurance", icon: "üè¢", isSafe: true },
  { id: 7, ar: "ÿ∂ÿ∫ÿ∑ ŸÑŸÑÿØŸÅÿπ ÿßŸÑŸÅŸàÿ±Ÿä", en: "Pressure for payment", icon: "‚è∞", isSafe: false },
  { id: 8, ar: "ŸÖÿ±ÿßÿ¨ÿπÿßÿ™ ŸÖŸàÿ´ŸÇÿ© + ÿÆÿ®ÿ±ÿ©", en: "Reviews + Experience", icon: "‚≠ê", isSafe: true },
  { id: 9, ar: "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ŸÅÿßÿµŸäŸÑ Ÿàÿßÿ∂ÿ≠ÿ©", en: "No clear details", icon: "‚ùì", isSafe: false },
  { id: 10, ar: "ÿ¥ŸáÿßÿØÿ© ÿßÿπÿ™ŸÖÿßÿØ", en: "Certificate", icon: "üìú", isSafe: true },
  { id: 11, ar: "ŸàÿπŸàÿØ ÿ∫Ÿäÿ± ŸàÿßŸÇÿπŸäÿ©", en: "Unrealistic promises", icon: "üé≠", isSafe: false },
  { id: 12, ar: "ÿ®ÿ±ŸÜÿßŸÖÿ¨ ŸÖŸÅÿµŸÑ + ÿ¨ÿØŸàŸÑ", en: "Detailed program", icon: "üìã", isSafe: true }
];

function HajjGame() {
  const [currentLang, setCurrentLang] = useState(() => {
    // Load saved language preference or default to 'ar'
    const savedLang = localStorage.getItem('smarthajj_lang') || 'ar';
    console.log('Sort game loading language from localStorage:', savedLang);
    return savedLang;
  });
  const [screen, setScreen] = useState('start');
  const [timeLeft, setTimeLeft] = useState(60);
  const [score, setScore] = useState(0);
  const [draggedCard, setDraggedCard] = useState(null);
  const [placedCards, setPlacedCards] = useState([]);
  const [safeZoneCards, setSafeZoneCards] = useState([]);
  const [fakeZoneCards, setFakeZoneCards] = useState([]);
  const [campaigns, setCampaigns] = useState([]);

  const t = {
    ar: {
      brandName: "Smart Hajj",
      tagline: "ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿ∞ŸÉŸä",
      langBtn: "EN",
      welcomeHero: "üïã",
      gameTitle: "üéØ ŸÅÿ±Ÿëÿ≤ Ÿàÿßÿ≠ŸÖŸä!",
      gameDescription: "ÿßÿ≥ÿ≠ÿ® ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ ŸÑŸÑŸÖŸÉÿßŸÜ ÿßŸÑÿµÿ≠Ÿäÿ≠",
      startBtn: "üöÄ ÿßÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ",
      timer: "‚è∞",
      score: "‚≠ê",
      progress: "üìä",
      instruction: "ÿßÿ≥ÿ≠ÿ® ŸÉŸÑ ÿ®ÿ∑ÿßŸÇÿ© ÿ•ŸÑŸâ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©",
      dragMe: "ÿßÿ≥ÿ≠ÿ®ŸÜŸä üëá",
      safeZone: "‚úÖ ÿ¢ŸÖŸÜÿ©",
      fakeZone: "‚ùå ŸàŸáŸÖŸäÿ©",
      perfectBadge: "üèÜ ŸÖÿ´ÿßŸÑŸä",
      excellentBadge: "üåü ŸÖŸÖÿ™ÿßÿ≤",
      goodBadge: "üëç ÿ¨ŸäÿØ",
      practiceBadge: "üí™ ŸàÿßÿµŸÑ",
      perfectMsg: "ÿ±ÿßÿ¶ÿπ! ŸÉŸÑ ÿ•ÿ¨ÿßÿ®ÿßÿ™ŸÉ ÿµÿ≠Ÿäÿ≠ÿ©!",
      excellentMsg: "ÿπŸÖŸÑ ŸÖŸÖÿ™ÿßÿ≤!",
      goodMsg: "ÿ£ÿØÿßÿ° ÿ¨ŸäÿØ!",
      practiceMsg: "ÿ®ÿØÿßŸäÿ© ÿ¨ŸäÿØÿ©!",
      prizeMsg: "üéÅ ÿßÿπÿ±ÿ∂ ŸÜÿ™Ÿäÿ¨ÿ™ŸÉ ŸÅŸä ÿ¨ŸÜÿßÿ≠ Smart Hajj",
      learnBtn: "üåê ÿßŸÉÿ™ÿ¥ŸÅ Smart Hajj",
      playAgainBtn: "üéÆ ÿßÿÆÿ™ÿ± ŸÑÿπÿ®ÿ© ÿ£ÿÆÿ±Ÿâ"
    },
    en: {
      brandName: "Smart Hajj",
      tagline: "SMART PROTECTION SYSTEM",
      langBtn: "AR",
      welcomeHero: "üïã",
      gameTitle: "üéØ Sort & Protect!",
      gameDescription: "Drag cards to correct zone",
      startBtn: "üöÄ Start Now",
      timer: "‚è∞",
      score: "‚≠ê",
      progress: "üìä",
      instruction: "Drag each card to the correct zone",
      dragMe: "Drag Me üëá",
      safeZone: "‚úÖ Safe",
      fakeZone: "‚ùå Fake",
      perfectBadge: "üèÜ Perfect",
      excellentBadge: "üåü Excellent",
      goodBadge: "üëç Good",
      practiceBadge: "üí™ Practice",
      perfectMsg: "Amazing! All answers correct!",
      excellentMsg: "Great work!",
      goodMsg: "Good performance!",
      practiceMsg: "Good start!",
      prizeMsg: "üéÅ Show result at Smart Hajj booth",
      learnBtn: "üåê Discover Smart Hajj",
      playAgainBtn: "üéÆ Choose Another Game"
    }
  };

  const lang = t[currentLang];

  useEffect(() => {
    document.documentElement.setAttribute('lang', currentLang);
    document.documentElement.setAttribute('dir', currentLang === 'ar' ? 'rtl' : 'ltr');
    // Save language preference
    localStorage.setItem('smarthajj_lang', currentLang);
  }, [currentLang]);

  useEffect(() => {
    const particles = [];
    for (let i = 0; i < 15; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 6 + 's';
      document.body.appendChild(particle);
      particles.push(particle);
    }
    return () => particles.forEach(p => p.remove());
  }, []);

  useEffect(() => {
    if (screen === 'game' && timeLeft > 0 && placedCards.length < campaigns.length) {
      const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
      return () => clearTimeout(timer);
    } else if (timeLeft === 0 && screen === 'game') {
      endGame();
    }
  }, [timeLeft, screen, placedCards.length, campaigns.length]);

  const createFireworks = () => {
    const colors = ['#FFD700', '#FF6B9D', '#FFA500', '#4CAF50'];
    for (let i = 0; i < 30; i++) {
      setTimeout(() => {
        const x = Math.random() * window.innerWidth;
        const y = Math.random() * window.innerHeight / 2;
        
        for (let j = 0; j < 15; j++) {
          const firework = document.createElement('div');
          firework.className = 'firework';
          firework.style.left = x + 'px';
          firework.style.top = y + 'px';
          firework.style.background = colors[Math.floor(Math.random() * colors.length)];
          
          const angle = (Math.PI * 2 * j) / 15;
          const velocity = 80 + Math.random() * 80;
          firework.style.setProperty('--x', Math.cos(angle) * velocity + 'px');
          firework.style.setProperty('--y', Math.sin(angle) * velocity + 'px');
          firework.style.animation = 'firework 1s ease-out forwards';
          
          document.body.appendChild(firework);
          setTimeout(() => firework.remove(), 1000);
        }
      }, i * 30);
    }
  };

  const startGame = () => {
    const shuffled = [...ALL_CAMPAIGNS].sort(() => Math.random() - 0.5).slice(0, 8);
    setCampaigns(shuffled);
    setScreen('game');
    setTimeLeft(60);
    setScore(0);
    setPlacedCards([]);
    setSafeZoneCards([]);
    setFakeZoneCards([]);
  };

  const handleDragStart = (e, campaign) => {
    if (placedCards.includes(campaign.id)) return;
    setDraggedCard(campaign);
    e.currentTarget.classList.add('dragging');
  };

  const handleDragEnd = (e) => {
    e.currentTarget.classList.remove('dragging');
  };

  const handleDragOver = (e) => {
    e.preventDefault();
  };

  const handleDragEnter = (e) => {
    e.preventDefault();
    e.currentTarget.classList.add('drag-over');
  };

  const handleDragLeave = (e) => {
    e.currentTarget.classList.remove('drag-over');
  };

  const handleDrop = (e, zone) => {
    e.preventDefault();
    e.currentTarget.classList.remove('drag-over');
    
    if (!draggedCard || placedCards.includes(draggedCard.id)) return;

    const isCorrect = (zone === 'safe' && draggedCard.isSafe) || (zone === 'fake' && !draggedCard.isSafe);
    
    if (isCorrect) {
      setScore(score + 100);
      createFireworks();
    }
    
    setPlacedCards([...placedCards, draggedCard.id]);
    
    if (zone === 'safe') {
      setSafeZoneCards([...safeZoneCards, draggedCard]);
    } else {
      setFakeZoneCards([...fakeZoneCards, draggedCard]);
    }
    
    if (placedCards.length + 1 === campaigns.length) {
      setTimeout(() => endGame(), 500);
    }
    
    setDraggedCard(null);
  };

  const endGame = () => {
    setScreen('finish');
    createFireworks();
  };

  const resetGame = () => {
    setScreen('start');
    setScore(0);
    setPlacedCards([]);
    setSafeZoneCards([]);
    setFakeZoneCards([]);
  };

  const correctCount = [...safeZoneCards, ...fakeZoneCards].filter(card => {
    return (safeZoneCards.includes(card) && card.isSafe) || 
           (fakeZoneCards.includes(card) && !card.isSafe);
  }).length;

  const percentage = campaigns.length > 0 ? Math.round((correctCount / campaigns.length) * 100) : 0;
  
  const getPerformanceLevel = () => {
    if (percentage === 100) return 'perfect';
    if (percentage >= 75) return 'excellent';
    if (percentage >= 50) return 'good';
    return 'practice';
  };

  const getPerformanceBadge = () => {
    const level = getPerformanceLevel();
    if (level === 'perfect') return lang.perfectBadge;
    if (level === 'excellent') return lang.excellentBadge;
    if (level === 'good') return lang.goodBadge;
    return lang.practiceBadge;
  };

  const getPerformanceMessage = () => {
    const level = getPerformanceLevel();
    if (level === 'perfect') return lang.perfectMsg;
    if (level === 'excellent') return lang.excellentMsg;
    if (level === 'good') return lang.goodMsg;
    return lang.practiceMsg;
  };

  return (
    <div className="game-wrapper">
      <div className="top-bar">
        <div className="brand-logo">
          <div className="brand-icon">üïã</div>
          <div className="brand-content">
            <div className="brand-text">{lang.brandName}</div>
            <div className="brand-tagline">{lang.tagline}</div>
          </div>
        </div>
        <div className="header-actions">
          <div className="header-shield">üõ°Ô∏è</div>
          <button className="lang-toggle" onClick={() => setCurrentLang(currentLang === 'ar' ? 'en' : 'ar')}>
            <span>üåê</span>
            <span>{lang.langBtn}</span>
          </button>
        </div>
      </div>

      <a href="index.html" className="back-to-menu">
        <span>‚Üê</span>
        <span>{currentLang === 'ar' ? 'üè† ÿßŸÑŸÇÿßÿ¶ŸÖÿ©' : 'üè† Menu'}</span>
      </a>

      <div className="main-content">
        {screen === 'start' && (
          <div className="start-screen">
            <div className="welcome-hero">{lang.welcomeHero}</div>
            <div className="game-title">{lang.gameTitle}</div>
            <div className="game-description">{lang.gameDescription}</div>
            <button className="start-btn" onClick={startGame}>{lang.startBtn}</button>
          </div>
        )}

        {screen === 'game' && (
          <div className="game-screen">
            <div className="game-status">
              <div className={`timer-box ${timeLeft <= 15 ? 'urgent' : ''}`}>
                <span>{lang.timer}</span>
                <span className="timer-number">{timeLeft}</span>
              </div>
              <div className="score-box">
                <span>{lang.score}</span>
                <span>{score}</span>
              </div>
              <div className="progress-box">
                <span>{lang.progress}</span>
                <span>{placedCards.length}/{campaigns.length}</span>
              </div>
            </div>

            <div className="instruction">
              <div className="instruction-text">{lang.instruction}</div>
            </div>

            <div className="game-layout">
              <div 
                className="drop-zone drop-zone-safe"
                onDragOver={handleDragOver}
                onDragEnter={handleDragEnter}
                onDragLeave={handleDragLeave}
                onDrop={(e) => handleDrop(e, 'safe')}
              >
                <div className="zone-header">
                  <div className="zone-label">{lang.safeZone}</div>
                  <div className="zone-icon">‚úÖ</div>
                </div>
                <div className="cards-area">
                  {safeZoneCards.map(card => (
                    <div key={card.id} className="campaign-card card-placed">
                      <div className="card-content">
                        <div className="card-icon">{card.icon}</div>
                        <div className="card-text">{card[currentLang]}</div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="waiting-cards">
                <div className="waiting-cards-header">{lang.dragMe}</div>
                {campaigns.map(campaign => (
                  <div
                    key={campaign.id}
                    className={`campaign-card ${placedCards.includes(campaign.id) ? 'card-placed' : ''}`}
                    draggable={!placedCards.includes(campaign.id)}
                    onDragStart={(e) => handleDragStart(e, campaign)}
                    onDragEnd={handleDragEnd}
                  >
                    <div className="card-content">
                      <div className="card-icon">{campaign.icon}</div>
                      <div className="card-text">{campaign[currentLang]}</div>
                    </div>
                  </div>
                ))}
              </div>

              <div 
                className="drop-zone drop-zone-fake"
                onDragOver={handleDragOver}
                onDragEnter={handleDragEnter}
                onDragLeave={handleDragLeave}
                onDrop={(e) => handleDrop(e, 'fake')}
              >
                <div className="zone-header">
                  <div className="zone-label">{lang.fakeZone}</div>
                  <div className="zone-icon">‚ùå</div>
                </div>
                <div className="cards-area">
                  {fakeZoneCards.map(card => (
                    <div key={card.id} className="campaign-card card-placed">
                      <div className="card-content">
                        <div className="card-icon">{card.icon}</div>
                        <div className="card-text">{card[currentLang]}</div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        )}

        {screen === 'finish' && (
          <div className="finish-screen">
            <div className={`result-hero ${getPerformanceLevel()}`}>
              <div className="result-score">{correctCount}/{campaigns.length}</div>
            </div>
            
            <div className={`performance-badge ${getPerformanceLevel()}`}>
              {getPerformanceBadge()}
            </div>
            
            <div className="result-subtitle">{getPerformanceMessage()}</div>

            <div className="prize-card">
              <div className="prize-icon">üéÅ</div>
              <div className="prize-text">{lang.prizeMsg}</div>
            </div>

            <div className="action-buttons">
              <button className="action-btn" onClick={() => window.open('https://smarthajj.streamlit.app', '_blank')}>
                {lang.learnBtn}
              </button>
              <button className="action-btn action-btn-secondary" onClick={() => window.location.href = 'index.html'}>
                {lang.playAgainBtn}
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

ReactDOM.render(<HajjGame />, document.getElementById('app'));
</script>
</body>
</html>
